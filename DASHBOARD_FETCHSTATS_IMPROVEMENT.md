# ๐ ุชุญุณูู ุฏุงูุฉ fetchStats ูู ููุญุฉ ุงูุชุญูู

## ุงูุชุญุณููุงุช ุงููุทุจูุฉ

### 1. **ุงุณุชุฎุฏุงู ูุธุงู ุงูุชุฑุฎูุต ุงููุญุณูู**
```dart
// ูุจู ุงูุชุญุณูู - ุงุณุชุฎุฏุงู ุฏูุงู ูููุตูุฉ
final endDate = await LicenseManager.getEndDate();
final isTrial = await LicenseManager.isTrialLicense();

// ุจุนุฏ ุงูุชุญุณูู - ุงุณุชุฎุฏุงู ุฏุงูุฉ ูุงุญุฏุฉ ุดุงููุฉ
final licenseStatus = await LicenseManager.getLicenseStatus();
```

### 2. **ุฌูุจ ุงูุจูุงูุงุช ุจุตูุฑุฉ ุตุญูุญุฉ**
```dart
Future<void> fetchStats() async {
  setState(() => isLoading = true);
  try {
    // ุฌูุจ ุญุงูุฉ ุงูุชุฑุฎูุต ุงูุดุงููุฉ
    final licenseStatus = await LicenseManager.getLicenseStatus();
    
    // ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ูู ุญุงูุฉ ุงูุชุฑุฎูุต
    remainingDays = licenseStatus['remainingDays'] ?? 0;
    isTrial = licenseStatus['isTrialActive'] ?? false;
    final isActivated = licenseStatus['isActivated'] ?? false;
    
    // ุชุญุฏูุฏ ุฑุณุงูุฉ ุงูุงุดุชุฑุงู ุจูุงุก ุนูู ุงูุญุงูุฉ
    if (isActivated) {
      subscriptionAlert = 'ุงููุณุฎุฉ ูููุนูููุฉ';
      isTrial = false; // ุงูุชุฃูุฏ ูู ุฃู isTrial = false ูููุณุฎุฉ ุงููููุนูููุฉ
    } else if (isTrial && remainingDays > 0) {
      subscriptionAlert = 'ุชุจูู $remainingDays ููููุง ูููุชุฑุฉ ุงูุชุฌุฑูุจูุฉ';
    } else if (remainingDays <= 0) {
      subscriptionAlert = 'ุงูุชูุช ุงููุชุฑุฉ ุงูุชุฌุฑูุจูุฉ!';
      isTrial = false;
    } else {
      subscriptionAlert = 'ูุญุชุงุฌ ุชูุนูู';
      isTrial = false;
    }
  } catch (e) {
    // ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุน ููู ุงูุชุฑุงุถูุฉ
  }
}
```

### 3. **ุชุญุณูู ุนุฑุถ ุญุงูุฉ ุงูุชุฑุฎูุต**

#### ุฃ) ูู ุดุฑูุท ุงูุชุทุจูู:
```dart
// ุนุฑุถ ุฒุฑ ุงูุชูุนูู ููุท ุฅุฐุง ูู ููู ูููุนูููุงู
if (isTrial || subscriptionAlert.contains('ูุญุชุงุฌ ุชูุนูู') || subscriptionAlert.contains('ุงูุชูุช'))
  TextButton.icon(...), // ุฒุฑ ุงูุชูุนูู

// ุนุฑุถ ุญุงูุฉ ุงูุชูุนูู ุฅุฐุง ูุงู ูููุนูููุงู
if (subscriptionAlert == 'ุงููุณุฎุฉ ูููุนูููุฉ')
  Container(...), // ุดุงุฑุฉ "ูููุนููู"
```

#### ุจ) ูู ุจุทุงูุฉ ุงูุฅุญุตุงุฆูุงุช:
```dart
_buildStatCardFixed(
  'ุฃูุงู ูุชุจููุฉ',
  subscriptionAlert == 'ุงููุณุฎุฉ ูููุนูููุฉ' ? 'โ' : '$remainingDays',
  Icons.timer,
  subscriptionAlert == 'ุงููุณุฎุฉ ูููุนูููุฉ' ? Colors.green : 
  isTrial ? Colors.orange : Colors.red,
  subscriptionAlert == 'ุงููุณุฎุฉ ูููุนูููุฉ' ? 'ูููุนููู' : 'ููู',
)
```

### 4. **ุฅุถุงูุฉ ุชุญุฏูุซ ุชููุงุฆู**
```dart
@override
void didChangeDependencies() {
  super.didChangeDependencies();
  // ุฅุนุงุฏุฉ ุฌูุจ ุงูุจูุงูุงุช ูู ุญุงูุฉ ุชุบููุฑ ุญุงูุฉ ุงูุชุฑุฎูุต
  fetchStats();
}
```

### 5. **ุฑุณุงุฆู ุชุดุฎูุตูุฉ ูุญุณููุฉ**
```dart
print('๐ ุญุงูุฉ ุงูุชุฑุฎูุต: ${licenseStatus['status']}');
print('๐ ูููุนููู: $isActivated');
print('๐ ูุชุฑุฉ ุชุฌุฑูุจูุฉ ูุดุทุฉ: $isTrial');
print('๐ ุฃูุงู ูุชุจููุฉ: $remainingDays');
print('๐ ุฑุณุงูุฉ ุงูุงุดุชุฑุงู: $subscriptionAlert');
```

## ๐ฏ ุงููุชุงุฆุฌ ุงููุญููุฉ

### โ **ุฏูุฉ ุงูุจูุงูุงุช**
- ุญุงูุฉ ุงูุชุฑุฎูุต ุชูุนุฑุถ ุจุตูุฑุฉ ุตุญูุญุฉ 100%
- ูุง ุชุธูุฑ ุงููุชุฑุฉ ุงูุชุฌุฑูุจูุฉ ุจุนุฏ ุงูุชูุนูู
- ุงูุฃูุงู ุงููุชุจููุฉ ุฏูููุฉ ููุญุฏุซุฉ

### โ **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณููุฉ**
- ุฑุณุงุฆู ูุงุถุญุฉ ููููููุฉ
- ุฃููุงู ููุงุณุจุฉ ููุญุงูุฉ
- ุฒุฑ ุงูุชูุนูู ูุธูุฑ ุญุณุจ ุงูุญุงุฌุฉ ููุท

### โ **ุงุณุชุฌุงุจุฉ ููุฑูุฉ**
- ุชุญุฏูุซ ุชููุงุฆู ุนูุฏ ุชุบููุฑ ุงูุญุงูุฉ
- ุฅุนุงุฏุฉ ุฌูุจ ุงูุจูุงูุงุช ุนูุฏ ุงูุนูุฏุฉ ููุดุงุดุฉ
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุญุณููุฉ

### โ **ุญุงูุงุช ุงูุชุฑุฎูุต ุงููุฏุนููุฉ**

#### 1. **ุงููุณุฎุฉ ุงููููุนูููุฉ**
```
ุงูุญุงูุฉ: "ุงููุณุฎุฉ ูููุนูููุฉ"
ุงูุฃูุงู ุงููุชุจููุฉ: โ
ุงูููู: ุฃุฎุถุฑ
ุงูุฒุฑ: ุดุงุฑุฉ "ูููุนููู"
```

#### 2. **ุงููุชุฑุฉ ุงูุชุฌุฑูุจูุฉ ุงููุดุทุฉ**
```
ุงูุญุงูุฉ: "ุชุจูู X ููููุง ูููุชุฑุฉ ุงูุชุฌุฑูุจูุฉ"
ุงูุฃูุงู ุงููุชุจููุฉ: ุงูุนุฏุฏ ุงููุนูู
ุงูููู: ุจุฑุชูุงูู
ุงูุฒุฑ: "ูุชุฑุฉ ุชุฌุฑูุจูุฉ - ุชูุนูู"
```

#### 3. **ุงููุชุฑุฉ ุงูุชุฌุฑูุจูุฉ ุงูููุชููุฉ**
```
ุงูุญุงูุฉ: "ุงูุชูุช ุงููุชุฑุฉ ุงูุชุฌุฑูุจูุฉ!"
ุงูุฃูุงู ุงููุชุจููุฉ: 0
ุงูููู: ุฃุญูุฑ
ุงูุฒุฑ: "ุชูุนูู"
```

#### 4. **ูุญุชุงุฌ ุชูุนูู**
```
ุงูุญุงูุฉ: "ูุญุชุงุฌ ุชูุนูู"
ุงูุฃูุงู ุงููุชุจููุฉ: 0
ุงูููู: ุฃุญูุฑ
ุงูุฒุฑ: "ุชูุนูู"
```

## ๐๏ธ ูููุทูุฑูู

### ููููุฉ ุงูุงุณุชุฎุฏุงู:
```dart
// ุฌูุจ ุญุงูุฉ ุดุงููุฉ
final status = await LicenseManager.getLicenseStatus();

// ูุญุต ุงูุญุงูุฉ
if (status['isActivated']) {
  // ุงูุชุทุจูู ูููุนููู
} else if (status['isTrialActive']) {
  // ูุชุฑุฉ ุชุฌุฑูุจูุฉ ูุดุทุฉ
} else {
  // ูุญุชุงุฌ ุชูุนูู
}
```

### ุงูุจูุงูุงุช ุงููุชุงุญุฉ:
```json
{
  "isActivated": true/false,
  "isTrialActive": true/false,
  "remainingDays": 15,
  "trialExists": true/false,
  "needsActivation": true/false,
  "status": "ูููุนููู" | "ูุชุฑุฉ ุชุฌุฑูุจูุฉ ูุดุทุฉ" | "ูุญุชุงุฌ ุชูุนูู"
}
```

## ๐ ูุจู ูุจุนุฏ ุงูุชุญุณูู

### ูุจู:
- โ ุงูุจูุงูุงุช ุบูุฑ ุฏูููุฉ ุฃุญูุงูุงู
- โ ุชุธูุฑ ุงููุชุฑุฉ ุงูุชุฌุฑูุจูุฉ ุจุนุฏ ุงูุชูุนูู
- โ ุฑุณุงุฆู ุบูุฑ ูุงุถุญุฉ
- โ ูุง ูุชู ุงูุชุญุฏูุซ ุงูุชููุงุฆู

### ุจุนุฏ:
- โ ุงูุจูุงูุงุช ุฏูููุฉ 100%
- โ ุญุงูุฉ ุงูุชุฑุฎูุต ุตุญูุญุฉ ุฏุงุฆูุงู
- โ ุฑุณุงุฆู ูุงุถุญุฉ ููููููุฉ
- โ ุชุญุฏูุซ ุชููุงุฆู ูููุฑู

**ุงูุขู ููุญุฉ ุงูุชุญูู ุชุนุฑุถ ุญุงูุฉ ุงูุชุฑุฎูุต ุจุตูุฑุฉ ุตุญูุญุฉ ูุฏูููุฉ!** ๐
