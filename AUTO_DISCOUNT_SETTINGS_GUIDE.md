# ุฏููู ุฅุนุฏุงุฏุงุช ุงูุฎุตููุงุช ุงูุชููุงุฆูุฉ

## ููุฎุต ุงูุชุญุฏูุซุงุช

ุชู ุชุทููุฑ ูุธุงู ูุชูุงูู ูุฅุนุฏุงุฏ ูุฅุฏุงุฑุฉ ุงูุฎุตููุงุช ุงูุชููุงุฆูุฉ ูู ุชุทุจูู ุงููุฏุฑุณุฉ ุจูุงุกู ุนูู ุทูุจู "ุงุนุชูุฏ ูุงุฒู ูุฎูู ุฎูุงุฑ ุงููุงู ุงูุฎุตู ุงูุชููุงุฆู".

## ุงููููุงุช ุงููุญุฏุซุฉ

### 1. AutoDiscountSettings Model
**ุงููุณุงุฑ:** `lib/localdatabase/auto_discount_settings.dart`
- ูููุฐุฌ ุงูุจูุงูุงุช ูุญูุธ ุฌููุน ุฅุนุฏุงุฏุงุช ุงูุฎุตููุงุช
- ูุดูู ุงูุชุญูู ุงูุนุงู ูุฅุนุฏุงุฏุงุช ูู ููุน ุฎุตู
- ูุณุชุฎุฏู Isar database ููุชุฎุฒูู

### 2. AutoDiscountSettingsManager
**ุงููุณุงุฑ:** `lib/helpers/auto_discount_settings_manager.dart`
- ูุฏูุฑ ุงูุฅุนุฏุงุฏุงุช ุงูุฐู ูุชุนุงูู ูุน SharedPreferences
- ูููุฑ ุฌููุน ุงูุนูููุงุช (ูุฑุงุกุฉุ ูุชุงุจุฉุ ุชุญุฏูุซ)
- ูุฏุนู ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ

### 3. Simple Auto Discount Processor (ูุญุฏุซ)
**ุงููุณุงุฑ:** `lib/helpers/simple_auto_discount_processor.dart`
- ุชู ุชุญุฏูุซ ุฌููุน ุฏูุงู ุงููุนุงูุฌุฉ ููุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช
- ุฅุถุงูุฉ ุงูุชุญูู ุงูุนุงู ูู ุชูุนูู/ุฅููุงู ุงููุธุงู
- ุฏุนู ุฅุนุฏุงุฏุงุช ูุฎุตุตุฉ ููู ููุน ุฎุตู

## ุงููุฒุงูุง ุงูุฌุฏูุฏุฉ

### 1. ุงูุชุญูู ุงูุนุงู
```dart
// ุชูุนูู ุฃู ุฅููุงู ุงููุธุงู ุจุงููุงูู
await settingsManager.setGlobalEnabled(false);

// ูุญุต ุญุงูุฉ ุงููุธุงู
bool isEnabled = await settingsManager.isGloballyEnabled();
```

### 2. ุงูุชุญูู ูู ูู ููุน ุฎุตู
```dart
// ุฅููุงู ุฎุตู ุงูุฃุดูุงุก
await settingsManager.setSiblingDiscountEnabled(false);

// ุฅููุงู ุฎุตู ุงูุฏูุน ุงููุจูุฑ
await settingsManager.setEarlyPaymentDiscountEnabled(false);

// ุฅููุงู ุฎุตู ุงูุฏูุน ุงููุงูู
await settingsManager.setFullPaymentDiscountEnabled(false);
```

### 3. ุชุฎุตูุต ุงููุณุจ ูุงูููู
```dart
// ุชุญุฏูุซ ูุณุจ ุฎุตู ุงูุฃุดูุงุก
await settingsManager.updateSiblingDiscountRates(
  rate2nd: 12.0,   // 12% ููุทุงูุจ ุงูุซุงูู
  rate3rd: 18.0,   // 18% ููุทุงูุจ ุงูุซุงูุซ
  rate4th: 25.0,   // 25% ููุทุงูุจ ุงูุฑุงุจุน ููุง ููู
);

// ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช ุงูุฏูุน ุงููุจูุฑ
await settingsManager.updateEarlyPaymentSettings(
  discountRate: 7.0,  // 7% ุฎุตู
  days: 45,           // 45 ููู ูุจู ุจุฏุงูุฉ ุงูุนุงู
);

// ุชุญุฏูุซ ูุณุจุฉ ุฎุตู ุงูุฏูุน ุงููุงูู
await settingsManager.updateFullPaymentDiscountRate(4.0); // 4%
```

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุฅูุดุงุก ูุซูู ูู ุงููุฏูุฑ
```dart
final settingsManager = AutoDiscountSettingsManager();
```

### 2. ุงูุญุตูู ุนูู ุงูุฅุนุฏุงุฏุงุช ุงูุญุงููุฉ
```dart
final settings = await settingsManager.getSettings();
print('ุงููุธุงู ููุนู: ${settings.globalEnabled}');
print('ุฎุตู ุงูุฃุดูุงุก ููุนู: ${settings.siblingDiscountEnabled}');
```

### 3. ุชุดุบูู ุงููุนุงูุฌ ูุน ุงูุฅุนุฏุงุฏุงุช
```dart
final processor = AutoDiscountProcessor(isar);
final discounts = await processor.processAllAutoDiscounts(student, academicYear);
```

## ุงูุญูุงูุฉ ุงููุฏูุฌุฉ

1. **ูุญุต ุงููุธุงู ุงูุนุงู:** ูุชู ูุญุต `globalEnabled` ูุจู ุฃู ูุนุงูุฌุฉ
2. **ูุญุต ูู ููุน ุฎุตู:** ูุชู ูุญุต ุชูุนูู ูู ููุน ูููุตู
3. **ุงูููู ุงูุงูุชุฑุงุถูุฉ:** ุฅุนุฏุงุฏุงุช ุขููุฉ ุนูุฏ ุนุฏู ูุฌูุฏ ููู ูุญููุธุฉ
4. **ุงูุชุญูู ูู ุงูุตุญุฉ:** ูุญุต ุงููุณุจ ูุงูููู ุงููุฏุฎูุฉ

## ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ

- **ุงููุธุงู ุงูุนุงู:** ููุนู
- **ุฎุตู ุงูุฃุดูุงุก:** ููุนู (10%, 15%, 20%)
- **ุฎุตู ุงูุฏูุน ุงููุจูุฑ:** ููุนู (5% ูู 30 ููู)
- **ุฎุตู ุงูุฏูุน ุงููุงูู:** ููุนู (3%)

## ููุงุญุธุงุช ูููุฉ

1. ุชู ุฅุถุงูุฉ `shared_preferences` ููุชุทูุจ ุฌุฏูุฏ
2. ุฌููุน ุงูุฅุนุฏุงุฏุงุช ุชูุญูุธ ูุญููุงู ุนูู ุงูุฌูุงุฒ
3. ุงููุธุงู ูุชูุงูู ูุน ุงูููุฏ ุงูููุฌูุฏ
4. ูุง ูุคุซุฑ ุนูู ุงูุฎุตููุงุช ุงููุทุจูุฉ ูุณุจูุงู

## ุงุณุชููุงู ุงูุชุทููุฑ

ููุงุณุชูุงุฏุฉ ุงููุงููุฉ ูู ูุฐุง ุงููุธุงูุ ูููุตุญ ุจุฅุถุงูุฉ:
1. ูุงุฌูุฉ ูุณุชุฎุฏู ูุฅุฏุงุฑุฉ ุงูุฅุนุฏุงุฏุงุช
2. ูุธุงู ูุณุฎ ุงุญุชูุงุทู ููุฅุนุฏุงุฏุงุช
3. ุณุฌู ุชุบููุฑุงุช ุงูุฅุนุฏุงุฏุงุช
4. ุชุตุฏูุฑ/ุงุณุชูุฑุงุฏ ุงูุฅุนุฏุงุฏุงุช

ุชู ุญู ุงููุดููุฉ ุงูุฃุณุงุณูุฉ ูุฅุถุงูุฉ ูุธุงู ูุชูุฏู ููุชุญูู ูู ุงูุฎุตููุงุช ุงูุชููุงุฆูุฉ! ๐
